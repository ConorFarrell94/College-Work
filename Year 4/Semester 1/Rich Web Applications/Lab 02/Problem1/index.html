<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Phone Directory</title>
	</head>
	<body>
		<div class="container">
			<form>
				<!-- using oninput events to restrict the input length -->
				<input
					type="text"
					id="name"
					placeholder="Name"
					oninput="maxLength=20;if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
					onkeydown="return /[a-z]/i.test(event.key)"
					required
				/>
				<br />
				<input
					type="number"
					id="phone"
					class="no-arrow"
					placeholder="Phone Number"
					oninput="maxLength=10;if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
					required
				/>
				<br />
				<input
					type="email"
					id="email"
					placeholder="Email"
					oninput="maxLength=40;if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
					required
				/>
				<br />
				<input type="submit" id="submit" value="Submit" />
				<br />
			</form>
			<div id="errorDiv" style="display: none">
				<p>You're missing some details</p>
			</div>
			<input
				type="text"
				id="myInput"
				onkeyup="search()"
				placeholder="Search for numbers.."
			/>
			<table id="myTable" class="sortable">
				<tr>
					<th id="idHead">ID</th>
					<th id="nameHead"><button>Name</button></th>
					<th id="numberHead">Phone number</th>
					<th id="emailHead">Email</th>
				</tr>
			</table>
			<div id="noResults" style="display: none">
				<p>No Results Found . .</p>
			</div>
		</div>

		<script type="text/javascript">
			// adding event listener to "submit" and dynamically making a table with the form details
			// display errorDiv if any details are missed
			document.getElementById("submit").onclick = function () {
				document.getElementById("myTable").style.display = "block";

				var n = document.getElementById("name").value;
				var p = document.getElementById("phone").value;
				var e = document.getElementById("email").value;
				var wrapper = document.createElement("div");

				// showing the errorDiv if theres no input
				if (n == "") {
					document.getElementById("errorDiv").style.display = "block";
					return;
				}
				if (p == "") {
					document.getElementById("errorDiv").style.display = "block";
					return;
				}
				if (e == "") {
					document.getElementById("errorDiv").style.display = "block";
					return;
				}

				// console.log(n, p, e)
				var table = document.getElementById("myTable");
				var row = table.insertRow(-1);
				var id = row.insertCell(0);
				var name = row.insertCell(1);
				var phone = row.insertCell(2);
				var email = row.insertCell(3);
				//tracking how many rows there are so as we know where to insert the next data
				var totalRowCount = table.rows.length; // 5
				var tbodyRowCount = table.tBodies[0].rows.length; // 3
				id.innerHTML = tbodyRowCount - 1;
				name.innerHTML = document.getElementById("name").value;
				phone.innerHTML = document.getElementById("phone").value;
				email.innerHTML = document.getElementById("email").value;

				// emptying the form after we're done
				document.getElementById("name").value = "";
				document.getElementById("phone").value = "";
				document.getElementById("email").value = "";
				// then hiding the errorDiv
				document.getElementById("errorDiv").style.display = "none";
				// calling the changeColor function here so as the odd rows are the correct color as we add entries
				changeColor();
				return false;
			};
		</script>
		<link rel="stylesheet" href="styles.css" />
		<script src="scripts.js"></script>
	</body>
</html>
